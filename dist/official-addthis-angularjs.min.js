/**
 * @license official-addthis-angularjs 1.0.0
 * Copyright (c) 2017 Oracle and/or its affiliates.
 * License: UPL
 */
var addthisModule=function(window,angular){var autoAddScript=!0,scriptInFooter=!0,profileId=!1,addthis_config={},addthis_share={},addthis_plugin_info={info_status:"enabled",cms_name:"Angular",plugin_name:"official-addthis-angularjs",plugin_version:"1.0.0",plugin_mode:"AddThis"};addthis_plugin_info.cms_version=angular.version.full;var defaultUrl="https://s7.addthis.com/js/300/addthis_widget.js",baseUrl=defaultUrl,checkForScript=function(document){var scriptOnPage=!1,selector='script[src*="addthis_widget.js"]',matches=document.querySelectorAll(selector);return matches.length>0&&(scriptOnPage=!0),scriptOnPage},addScript=function(document){if(!checkForScript(document)){var url;url=profileId?baseUrl+"#pubid="+profileId:baseUrl;var script=document.createElement("script");script.src=url,scriptInFooter!==!0&&"object"==typeof document.head?document.head.appendChild(script):document.body.appendChild(script)}},smartLayersRefreshRequest={pending:!1},queueSmartLayersRefresh=function($window,$interval){if(smartLayersRefreshRequest.lastTs=(new Date).getTime(),$window.addthis_config=angular.copy(addthis_config),$window.addthis_share=angular.copy(addthis_share),!smartLayersRefreshRequest.pending&&"undefined"!=typeof $window.addthis&&"undefined"!=typeof $window.addthis.layers&&"undefined"!=typeof $window.addthis.layers.refresh){smartLayersRefreshRequest.pending=!0;var intervalPromise,checkAndRun=function(){var now=(new Date).getTime();now-smartLayersRefreshRequest.lastTs>=100&&now-$window.addthis.layers.lastViewRegistered>500&&($interval.cancel(intervalPromise),smartLayersRefreshRequest.pending=!1,$window.addthis.layers.refresh(addthis_share.url,addthis_share.title))};intervalPromise=$interval(checkAndRun,100,0,!1)}},setAddThisConfig=function(input){return"object"==typeof input&&(input.pubid&&(profileId=input.pubid),input.ignore_server_config?addthis_plugin_info.plugin_mode="Local":addthis_plugin_info.plugin_mode="AddThis",addthis_config=angular.copy(input),profileId&&(addthis_config.pubid=profileId)),angular.copy(addthis_config)},setAddThisShare=function(input){return"object"==typeof input&&(addthis_share=angular.copy(input)),angular.copy(addthis_share)},setShareUrl=function(url){addthis_share.url=url},setShareTitle=function(title){addthis_share.title=title},setShareDescription=function(description){addthis_share.description=description},setShareMedia=function(media){addthis_share.media=media},load={promise:!1,interval:200},scriptLoaded=function($window,$q,$interval){if(load.promise)return load.promise;var deferred=$q.defer();if($window.addthis)deferred.resolve($window.addthis);else var addThisCheckPromise=$interval(function(){$window.addthis&&($interval.cancel(addThisCheckPromise),load.done=!0,deferred.resolve($window.addthis))},load.interval,0,!1);return load.promise=deferred.promise,load.promise},twitterVia=function(handle){"string"==typeof handle&&handle.length>0?("undefined"==typeof addthis_share.passthrough&&(addthis_share.passthrough={}),"undefined"==typeof addthis_share.passthrough.twitter&&(addthis_share.passthrough.twitter={}),addthis_share.passthrough.twitter.via=handle):handle===!1&&"undefined"!=typeof addthis_share.passthrough&&"undefined"!=typeof addthis_share.passthrough.twitter&&"undefined"!=typeof addthis_share.passthrough.twitter.via&&delete addthis_share.passthrough.twitter.via},urlShortening=function(urlShorteningService,socialService){"undefined"==typeof addthis_share.url_transforms&&(addthis_share.url_transforms={}),"undefined"==typeof addthis_share.url_transforms.shorten&&(addthis_share.url_transforms.shorten={}),"undefined"==typeof addthis_share.shorteners&&(addthis_share.shorteners={}),addthis_share.url_transforms.shorten[socialService]=urlShorteningService,addthis_share.shorteners[urlShorteningService]={}},addthisService=function($window,$q,$interval){load.promise=!1,smartLayersRefreshRequest.pending=!1,smartLayersRefreshRequest.lastTs=0;var service={add:function(){addScript($window.document)},layersRefresh:function(){queueSmartLayersRefresh($window,$interval)},config:function(input){var configCopy=setAddThisConfig(input);return queueSmartLayersRefresh($window,$interval),configCopy},share:function(input){var shareCopy=setAddThisShare(input);return queueSmartLayersRefresh($window,$interval),shareCopy},shareUrl:function(url){return"undefined"!=typeof url&&(setShareUrl(url),queueSmartLayersRefresh($window,$interval)),addthis_share.url},shareTitle:function(title){return"undefined"!=typeof title&&(setShareTitle(title),queueSmartLayersRefresh($window,$interval)),addthis_share.title},shareDescription:function(description){return"undefined"!=typeof description&&(setShareDescription(description),queueSmartLayersRefresh($window,$interval)),addthis_share.description},shareMedia:function(media){return"undefined"!=typeof media&&(setShareMedia(media),queueSmartLayersRefresh($window,$interval)),addthis_share.media},twitterVia:function(handle){twitterVia(handle),queueSmartLayersRefresh($window,$interval)},urlShortening:function(urlShorteningService,socialService){urlShortening(urlShorteningService,socialService),queueSmartLayersRefresh($window,$interval)},loaded:function(){return scriptLoaded($window,$q,$interval)},profileId:function(){return profileId}};return service},addthisProvider=function($windowProvider){var window=$windowProvider.$get();return"object"==typeof window.addthis_config&&(addthis_config=angular.copy(window.addthis_config)),window.addthis_share&&(addthis_share=angular.copy(window.addthis_share),window.addthis&&(addthis_share.url&&delete addthis_share.url,addthis_share.title&&delete addthis_share.title,addthis_share.description&&delete addthis_share.description,addthis_share.media&&delete addthis_share.media)),this.profileId=function(input){return"undefined"!=typeof input&&(profileId=input,addthis_config.pubid=input),profileId},this.config=function(input){var configCopy=setAddThisConfig(input);return configCopy},this.share=function(input){var shareCopy=setAddThisShare(input);return shareCopy},this.shareUrl=function(url){return"undefined"!=typeof url&&setShareUrl(url),addthis_share.url},this.shareTitle=function(title){return"undefined"!=typeof title&&setShareTitle(title),addthis_share.title},this.shareDescription=function(description){return"undefined"!=typeof description&&setShareDescription(description),addthis_share.description},this.shareMedia=function(media){return"undefined"!=typeof media&&setShareMedia(media),addthis_share.media},this.twitterVia=function(handle){twitterVia(handle)},this.urlShortening=function(urlShorteningService,socialService){urlShortening(urlShorteningService,socialService)},this.disableAutoAdd=function(){return autoAddScript=!1,this},this.enableAutoAdd=function(){return autoAddScript=!0,this},this.scriptInHead=function(){return scriptInFooter=!1,this},this.environment=function(env){return baseUrl="dev"===env||"test"===env||"local"===env?"http://cache-"+env+".addthis.com/js/300/addthis_widget.js":"unittest"===env?"addthis_widget.js":defaultUrl},this.$get=addthisService,this},addthisRun=function($window,$rootScope,$addthis){0===Object.keys(addthis_config).length&&"object"==typeof $window.addthis_config&&0!==Object.keys($window.addthis_config).length?(addthis_config=angular.copy($window.addthis_config),addthis_config.pubid&&(profileId=addthis_config.pubid)):$window.addthis_config=angular.copy(addthis_config),0===Object.keys(addthis_share).length&&"object"==typeof $window.addthis_share&&0!==Object.keys($window.addthis_share).length?addthis_share=angular.copy($window.addthis_share):$window.addthis_share=angular.copy(addthis_share),$window.addthis_plugin_info=addthis_plugin_info,autoAddScript&&addScript($window.document),$rootScope.$on("$locationChangeSuccess",function(event,next,current){next!==current&&$addthis.layersRefresh()})},addthisDirective=function($addthis,$timeout){var directive={restrict:"AECM",scope:{toolClass:"=toolClass",shareUrl:"=shareUrl",shareTitle:"=shareTitle",shareDescription:"=shareDescription",shareMedia:"=shareMedia"},link:function($scope,el){var urlAttr="data-url",titleAttr="data-title",descriptionAttr="data-description",mediaAttr="data-media",recreateToolDiv=function(){var newToolDiv=document.createElement("div");newToolDiv.className=$scope.toolClass,angular.isDefined($scope.shareUrl)&&newToolDiv.setAttribute(urlAttr,$scope.shareUrl),angular.isDefined($scope.shareTitle)&&newToolDiv.setAttribute(titleAttr,$scope.shareTitle),angular.isDefined($scope.shareDescription)&&newToolDiv.setAttribute(descriptionAttr,$scope.shareDescription),angular.isDefined($scope.shareMedia)&&newToolDiv.setAttribute(mediaAttr,$scope.shareMedia),el.empty(),el.append(newToolDiv),$timeout(function(){$addthis.layersRefresh()})};recreateToolDiv(),$scope.$watchGroup(["toolClass","shareUrl","shareTitle","shareDescription","shareMedia"],function(newVal,oldVal){newVal[0]===oldVal[0]&&newVal[1]===oldVal[1]&&newVal[2]===oldVal[2]&&newVal[3]===oldVal[3]&&newVal[4]===oldVal[4]||recreateToolDiv()})}};return directive},addthisModule=angular.module("addthis",["ng"]);return addthisModule.provider("$addthis",["$windowProvider",addthisProvider]),addthisModule.run(["$window","$rootScope","$addthis",addthisRun]),addthisModule.directive("addthisTool",["$addthis","$timeout",addthisDirective]),addthisModule}(window,angular);